!function(){function e(r,n,t){var o=e.resolve(r);if(null==o){t=t||r,n=n||"root";var i=new Error('Failed to require "'+t+'" from "'+n+'"');throw i.path=t,i.parent=n,i.require=!0,i}var s=e.modules[o];if(!s._resolving&&!s.exports){var a={};a.exports={},a.client=a.component=!0,s._resolving=!0,s.call(this,a.exports,e.relative(o),a),delete s._resolving,s.exports=a.exports}return s.exports}e.modules={},e.aliases={},e.resolve=function(r){"/"===r.charAt(0)&&(r=r.slice(1));for(var n=[r,r+".js",r+".json",r+"/index.js",r+"/index.json"],t=0;t<n.length;t++){var r=n[t];if(e.modules.hasOwnProperty(r))return r;if(e.aliases.hasOwnProperty(r))return e.aliases[r]}},e.normalize=function(e,r){var n=[];if("."!=r.charAt(0))return r;e=e.split("/"),r=r.split("/");for(var t=0;t<r.length;++t)".."==r[t]?e.pop():"."!=r[t]&&""!=r[t]&&n.push(r[t]);return e.concat(n).join("/")},e.register=function(r,n){e.modules[r]=n},e.alias=function(r,n){if(!e.modules.hasOwnProperty(r))throw new Error('Failed to alias "'+r+'", it does not exist');e.aliases[n]=r},e.relative=function(r){function n(e,r){for(var n=e.length;n--;)if(e[n]===r)return n;return-1}function t(n){var o=t.resolve(n);return e(o,r,n)}var o=e.normalize(r,"..");return t.resolve=function(t){var i=t.charAt(0);if("/"==i)return t.slice(1);if("."==i)return e.normalize(o,t);var s=r.split("/"),a=n(s,"deps")+1;return a||(a=0),t=s.slice(0,a+1).join("/")+"/deps/"+t},t.exists=function(r){return e.modules.hasOwnProperty(t.resolve(r))},t},e.register("component-trim/index.js",function(e,r,n){function t(e){return e.replace(/^\s*|\s*$/g,"")}e=n.exports=t,e.left=function(e){return e.replace(/^\s*/,"")},e.right=function(e){return e.replace(/\s*$/,"")}}),e.register("component-querystring/index.js",function(e,r){var n=r("trim");e.parse=function(e){if("string"!=typeof e)return{};if(e=n(e),""==e)return{};for(var r={},t=e.split("&"),o=0;o<t.length;o++){var i=t[o].split("=");r[i[0]]=null==i[1]?"":decodeURIComponent(i[1])}return r},e.stringify=function(e){if(!e)return"";var r=[];for(var n in e)r.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return r.join("&")}}),e.register("kaerus-component-urlparser/index.js",function(e,r,n){function t(e){var r="";return e=e?e:this,r+=o(e),r+=i(e),r+=s(e)}function o(e){var r="";return e=e?e.host:this.host,e&&(e.protocol&&(r+=e.protocol+"://"),e.username&&(r+=e.username+(e.password?":"+e.password:"")+"@"),e.hostname&&(r+=e.hostname),e.port&&(r+=":"+e.port)),r}function i(e){var r="";return e=e?e.path:this.path,e&&(e.base&&(r+="/"+e.base),e.name&&(r+=":"+e.name),e.hash&&(r+="#"+e.hash)),r}function s(e){var r="";return e=e?e.query:this.query,e&&(r="?",e.parts&&(r+=e.parts.join("&"))),r}function a(e){var r,n={};if(Object.defineProperty(n,"toString",{enumerable:!1,value:t}),"string"==typeof e){var o;o=u.exec(e),(o[1]||o[4])&&(n.host={},o[1]&&(n.host.protocol=o[1]),o[2]&&(n.host.username=o[2]),o[3]&&(n.host.password=o[3]),o[4]&&(n.host.hostname=o[4]),o[5]&&(n.host.port=o[5])),o[6]&&(n.path={},o[7]&&(n.path.base=o[7]),o[8]&&(n.path.name=o[8]),o[9]&&(n.path.hash=o[9])),o[10]&&(n.query={},n.query.parts=o[10].split("&"),n.query.parts.length&&(n.query.params={},n.query.parts.forEach(function(e){r=e.split("="),n.query.params[r[0]]=r[1]})))}return n}var u=/^(?:(?:([A-Za-z]+):?\/{2})?(?:(\w+)?:?([^\x00-\x1F^\x7F^:]*)@)?([\w\-\.]+)?(?::(\d+))?)\/?(([^\x00-\x1F^\x7F^\#^\?^:]+)?(?::([^\x00-\x1F^\x7F^\#^\?]+))?(?:#([^\x00-\x1F^\?]+))?)(?:\?(.*))?$/;n.exports.url=t,n.exports.host=o,n.exports.path=i,n.exports.query=s,n.exports.parse=a}),e.register("component-cookie/index.js",function(e,r,n){function t(e,r,n){n=n||{};var t=a(e)+"="+a(r);null==r&&(n.maxage=-1),n.maxage&&(n.expires=new Date(+new Date+n.maxage)),n.path&&(t+="; path="+n.path),n.domain&&(t+="; domain="+n.domain),n.expires&&(t+="; expires="+n.expires.toUTCString()),n.secure&&(t+="; secure"),document.cookie=t}function o(){return s(document.cookie)}function i(e){return o()[e]}function s(e){var r,n={},t=e.split(/ *; */);if(""==t[0])return n;for(var o=0;o<t.length;++o)r=t[o].split("="),n[u(r[0])]=u(r[1]);return n}var a=encodeURIComponent,u=decodeURIComponent;n.exports=function(e,r,n){switch(arguments.length){case 3:case 2:return t(e,r,n);case 1:return i(e);default:return o()}}}),e.register("pivot/browser.js",function(e,r,n){function t(e,r,n){if(e=e+"?"+u.stringify(r),!n)return(new Image).src=e;var t=s(e);return t?(t.onload=function(){try{n(null,JSON.parse(xhr.responseText))}catch(e){n(e)}},t.onerror=function(){n(new Error("Request could not be completed"))},t.ontimeout=function(){n()},t.send(),void 0):n(new Error("CORS not supported"))}function o(e){return e=e||"pivot",function(r,n){return"function"==typeof r?r(null,p(e)):(p(e,r),n(),void 0)}}function i(e){var r={};return e=a(e),r.app=e.host.username,e.host.username=null,r.url=e.toString(),r}function s(e){var r=new XMLHttpRequest;return"withCredentials"in r?(r.open("GET",e,!0),r):"undefined"!=typeof XDomainRequest?(r=new XDomainRequest,r.open("GET",e),r):void 0}var a=r("urlparser").parse,u=r("querystring"),p=r("cookie"),c=r("./util");e=n.exports=c.createClient(null,{parse:i,get:t,token:o()}),e.client=function(e,r){return r=r||{},r.get=r.get||t,r.token=r.token||o(r.cookie),r.parse=r.parse||i,c.createClient(e,r)}}),e.register("pivot/util.js",function(e){function r(e,r){r=r||{};var n=r.parse(e);return n.events=n.url+"/events",n.assignments=n.url+"/assignments",n.debug=r.debug||!1,n.test=r.test||!1,n.get=r.get,n.token=r.token,n.error=r.error||t(r.silent),n}function n(e,r){if(!r.app)return r.error("pivot not initialized. use `pivot.init('https://myappid:@clients.pivotapp.io')`");var n={a:r.app,e:e};return r.test&&(n.test=1),"string"==typeof e?r.token(function(e,t){return e?r.error(e.stack||e):t?(n.t=t,r.get(r.events,n),void 0):r.error("User needs a set of assignments before recording events")}):(delete n.e,r.get(r.assignments,n,function(n,t){return n?e(n):(r.token(t.token,function(r){return r?e(r):(e(null,t.assignments),void 0)}),void 0)}),void 0)}function t(e){return!e&&console&&console.error?function(e){console.error(e)}:function(){}}e.createClient=function(e,o){function i(e){return n(e,s)}var s=e?r(e,o):{error:t()};return i.set=function(e,r){s[e]=r,"silent"===e&&(s.error=t(r))},i.init=function(e,n){n=n||o||{},n.parse=n.parse||o.parse,n.get=n.get||o.get,n.token=n.token||o.token,s=r(e,n||o)},i}}),e.alias("component-querystring/index.js","pivot/deps/querystring/index.js"),e.alias("component-querystring/index.js","querystring/index.js"),e.alias("component-trim/index.js","component-querystring/deps/trim/index.js"),e.alias("kaerus-component-urlparser/index.js","pivot/deps/urlparser/index.js"),e.alias("kaerus-component-urlparser/index.js","urlparser/index.js"),e.alias("component-cookie/index.js","pivot/deps/cookie/index.js"),e.alias("component-cookie/index.js","cookie/index.js"),e.alias("pivot/browser.js","pivot/index.js"),"object"==typeof exports?module.exports=e("pivot"):"function"==typeof define&&define.amd?define(function(){return e("pivot")}):this.pivot=e("pivot")}();